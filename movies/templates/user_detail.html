{% extends 'base.html' %}

{% block content %}
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8 offset-md-2">
                <div class="card">
                    <div class="card-header">
                        <h3>User Profile</h3>
                    </div>
                    <div class="card-body">
                        <p><strong>Username:</strong> {{ user.username }}</p>
                        <p><strong>Email:</strong> {{ user.email }}</p>
                        <p><strong>First Name:</strong> {{ user.first_name }}</p>
                        <p><strong>Last Name:</strong> {{ user.last_name }}</p>
                        <p><strong>Date Joined:</strong> {{ user.date_joined }}</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="container mt-5">
            <h2>Your Ratings</h2>
            <p class="text-muted">Most Recently Rated</p>
            <div class="row">
                {% for rating in user_ratings %}
                    <div class="col-md-3 mb-4">
                        <div class="card h-100">
                            <div class="row g-0">
                                <!-- Colonna per l'immagine -->
                                <div class="col-4">
                                    {% if movie.get_poster_url %}
                                        <img src="{{ movie.get_poster_url }}" class="img-fluid rounded-start"
                                             alt="{{ movie.title }}">
                                    {% else %}
                                        <img src="https://via.placeholder.com/300x450?text=No+Image"
                                             class="img-fluid rounded-start" alt="No Image Available">
                                    {% endif %}
                                </div>
                                <!-- Colonna per i dettagli -->
                                <div class="col-8">
                                    <div class="card-body">
                                        <h5 class="card-title">{{ rating.movie.title }}</h5>
                                        <p class="card-text">
                                            <span>Release Year: {{ rating.movie.release_year }}</span><br>
                                            <span>Rating: {{ rating.rating }}</span>
                                            <i class="bi bi-star-fill" style="color: #ffd700;"></i>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}
